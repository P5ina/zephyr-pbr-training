# PBR Multi-Output Model Training Config

model:
  base_model: "stabilityai/stable-diffusion-xl-base-1.0"
  vae_model: "madebyollin/sdxl-vae-fp16-fix"

  # Output channels (4 PBR maps)
  output_channels:
    - basecolor
    - normal
    - roughness
    - height

training:
  # Dataset
  data_dir: "./data/pbr_dataset"
  resolution: 512  # Training resolution (crops)

  # Batch & steps
  batch_size: 1
  gradient_accumulation_steps: 4
  max_train_steps: 20000

  # Learning rate
  learning_rate: 1.0e-5
  lr_scheduler: "cosine"
  lr_warmup_steps: 500

  # Optimizer
  use_8bit_adam: true
  adam_beta1: 0.9
  adam_beta2: 0.999
  adam_weight_decay: 0.01
  max_grad_norm: 1.0

  # Mixed precision
  mixed_precision: "bf16"
  gradient_checkpointing: true
  enable_xformers: true

  # Validation
  validation_steps: 500
  num_validation_samples: 4
  validation_prompt: "seamless tileable pbr texture of rusty metal, 4k, high detail"

checkpointing:
  output_dir: "./output"
  save_steps: 2000
  keep_last_n: 3

logging:
  use_wandb: true
  project_name: "zephyr-pbr-training"
  log_every_n_steps: 10
  log_images: true
